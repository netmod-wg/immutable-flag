<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>YANG Metadata Annotation for Immutable Flag</title>
<meta content="Qiufang Ma" name="author">
<meta content="Qin Wu" name="author">
<meta content="Balazs Lengyel" name="author">
<meta content="Hongwei Li" name="author">
<meta content='
       This document defines a way to formally document existing behavior,
   implemented by servers in production, on the immutability of some
   system-provided nodes, using a YANG metadata annotation called
   "immutable" to flag which nodes are immutable. 
       Clients may use "immutable" annotations provided by the server, to
   know beforehand why certain otherwise valid configuration requests
   will cause the server to return an error. 
       The immutable flag is descriptive, documenting existing behavior, not
   proscriptive, dictating server behavior. 
    ' name="description">
<meta content="xml2rfc 3.21.0" name="generator">
<meta content="immutable flag" name="keyword">
<meta content="system configuration" name="keyword">
<meta content="draft-ietf-netmod-immutable-flag-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.21.0
    Python 3.12.3
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.2.2
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 69.5.1
    six 1.16.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-netmod-immutable-flag.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">immutable flag</td>
<td class="right">June 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Ma, et al.</td>
<td class="center">Expires 31 December 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">netmod</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-netmod-immutable-flag-latest</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc6241" class="eref">6241</a>, <a href="https://www.rfc-editor.org/rfc/rfc8040" class="eref">8040</a>, <a href="https://www.rfc-editor.org/rfc/rfc8526" class="eref">8526</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-06-29" class="published">29 June 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-12-31">31 December 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">Q. Ma, <span class="editor">Ed.</span>
</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">Q. Wu</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">B. Lengyel, <span class="editor">Ed.</span>
</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">H. Li</div>
<div class="org">HPE</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">YANG Metadata Annotation for Immutable Flag</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a way to formally document existing behavior,
   implemented by servers in production, on the immutability of some
   system-provided nodes, using a YANG metadata annotation called
   "immutable" to flag which nodes are immutable.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">Clients may use "immutable" annotations provided by the server, to
   know beforehand why certain otherwise valid configuration requests
   will cause the server to return an error.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">The immutable flag is descriptive, documenting existing behavior, not
   proscriptive, dictating server behavior.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
    Network Modeling Working Group mailing list (netmod@ietf.org),
    which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/netmod/">https://mailarchive.ietf.org/arch/browse/netmod/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/netmod-wg/immutable-flag">https://github.com/netmod-wg/immutable-flag</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 31 December 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-updates-to-rfc-6241-and-rfc" class="internal xref">Updates to RFC 6241 and RFC 8526</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-updates-to-rfc-8040" class="internal xref">Updates to RFC 8040</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-editorial-note-to-be-remove" class="internal xref">Editorial Note (To be removed by RFC Editor)</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-applicability" class="internal xref">Applicability</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-immutable-metadata-annotati" class="internal xref">"Immutable" Metadata Annotation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-definition" class="internal xref">Definition</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-with-immutable-parameter" class="internal xref">"with-immutable" Parameter</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="auto internal xref">4.2.1</a>.  <a href="#name-netconf-extensions-to-suppo" class="internal xref">NETCONF Extensions to Support "with-immutable"</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="auto internal xref">4.2.2</a>.  <a href="#name-restconf-extensions-to-supp" class="internal xref">RESTCONF Extensions to Support "with-immutable"</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-use-of-immutable-flag-for-d" class="internal xref">Use of Immutable Flag for Different Statements</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-the-leaf-statement" class="internal xref">The "leaf" Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-the-leaf-list-statement" class="internal xref">The "leaf-list" Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-the-container-statement" class="internal xref">The "container" Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-the-list-statement" class="internal xref">The "list" Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="auto internal xref">5.5</a>.  <a href="#name-the-anydata-statement" class="internal xref">The "anydata" Statement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="auto internal xref">5.6</a>.  <a href="#name-the-anyxml-statement" class="internal xref">The "anyxml" Statement</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-immutability-of-interior-no" class="internal xref">Immutability of Interior Nodes</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-system-configuration-datast" class="internal xref">System Configuration Datastore Interactions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-nacm-interactions" class="internal xref">NACM Interactions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-yang-module" class="internal xref">YANG Module</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-the-ietf-xml-registry" class="internal xref">The "IETF XML" Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-the-yang-module-names-regis" class="internal xref">The "YANG Module Names" Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="auto internal xref">11.3</a>.  <a href="#name-restconf-capability-urn-reg" class="internal xref">RESTCONF Capability URN Registry</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-detailed-use-cases" class="internal xref">Detailed Use Cases</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-uc1-modeling-of-server-capa" class="internal xref">UC1 - Modeling of server capabilities</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-uc2-hw-based-auto-configura" class="internal xref">UC2 - HW based auto-configuration - Interface Example</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-uc3-predefined-administrato" class="internal xref">UC3 - Predefined Administrator Roles</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.4">
                <p id="section-toc.1-1.13.2.4.1"><a href="#appendix-A.4" class="auto internal xref">A.4</a>.  <a href="#name-uc4-declaring-immutable-sys" class="internal xref">UC4 - Declaring immutable system configuration from an LNE's perspective</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-existing-implementations" class="internal xref">Existing Implementations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document defines a way to formally document as a YANG metadata
   annotation an existing model handling behavior that has been used by
   multiple standard organizations and vendors.  It is the aim to create
   one single standard solution for documenting non-modifiable system
   data declared as configuration, instead of the multiple existing
   vendor and organization specific solutions.  See <a href="#implementations" class="auto internal xref">Appendix B</a> for
   existing implementations.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">YANG <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span> is a data modeling language used to model both state
   and configuration data, based on the "config" statement.  However,
   there exists some system configuration data that cannot be modified
   by the client (it is immutable), but still needs to be declared as
   "config true" to:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-3.1">
          <p id="section-1-3.1.1">allow configuration of data nodes under immutable lists or containers;<a href="#section-1-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-3.2">
          <p id="section-1-3.2.1">place "when", "must" and "leafref" constraints between configuration
   and immutable data nodes;<a href="#section-1-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-3.3">
          <p id="section-1-3.3.1">ensure the existence of specific list entries that are provided and
   needed by the system, while additional list entries can be created,
   modified or deleted.<a href="#section-1-3.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-4">If the server always rejects the client attempts to override some
   system-provided data because it internally thinks immutable, it should document
   it towards the clients in a machine-readable way rather than writing as
   plain text in the "description" statement.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This document defines a way to formally document existing behavior,
   implemented by servers in production, on the immutability of some
   system-provided nodes, using a YANG metadata annotation <span>[<a href="#RFC7952" class="cite xref">RFC7952</a>]</span>
   called "immutable" to flag which nodes are immutable.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This document does not apply to the server not having any immutable
   system configuration.  While in some cases immutability may be
   needed, it also has disadvantages, therefore it <span class="bcp14">SHOULD</span> be avoided
   wherever possible.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">The following is a list of already implemented and potential use
   cases:<a href="#section-1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-8.1">
          <p id="section-1-8.1.1">UC1  Modeling of server capabilities<a href="#section-1-8.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.2">
          <p id="section-1-8.2.1">UC2  HW based auto-configuration<a href="#section-1-8.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.3">
          <p id="section-1-8.3.1">UC3  Predefined administrator roles<a href="#section-1-8.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.4">
          <p id="section-1-8.4.1">UC4  Declaring immutable system configuration from an LNE's perspective<a href="#section-1-8.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-9"><a href="#use-cases" class="auto internal xref">Appendix A</a> describes the use cases in detail.<a href="#section-1-9" class="pilcrow">¶</a></p>
<div id="updates-to-rfc-6241-and-rfc-8526">
<section id="section-1.1">
        <h3 id="name-updates-to-rfc-6241-and-rfc">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-updates-to-rfc-6241-and-rfc" class="section-name selfRef">Updates to RFC 6241 and RFC 8526</a>
        </h3>
<p id="section-1.1-1">This document updates <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> and <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span>. The NETCONF &lt;get&gt; and
   &lt;get-config&gt; operations defined in <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>, and &lt;get-data&gt; operation
   defined in <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span> are augmented with an additional input parameter
   named "with-immutable", as specified in <a href="#NETCONF-ext" class="auto internal xref">Section 4.2.1</a>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="updates-to-rfc-8040">
<section id="section-1.2">
        <h3 id="name-updates-to-rfc-8040">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-updates-to-rfc-8040" class="section-name selfRef">Updates to RFC 8040</a>
        </h3>
<p id="section-1.2-1">This document updates Sections <a href="https://rfc-editor.org/rfc/rfc8040#section-4.8" class="relref">4.8</a> and <a href="https://rfc-editor.org/rfc/rfc8040#section-9.1.1" class="relref">9.1.1</a> of <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span> to add an
   additional input parameter named "with-immutable", as specified in <a href="#RESTCONF-ext" class="auto internal xref">Section 4.2.2</a>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="editorial-note-to-be-removed-by-rfc-editor">
<section id="section-1.3">
        <h3 id="name-editorial-note-to-be-remove">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-editorial-note-to-be-remove" class="section-name selfRef">Editorial Note (To be removed by RFC Editor)</a>
        </h3>
<p id="section-1.3-1">Note to the RFC Editor: This section is to be removed prior to publication.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">This document contains placeholder values that need to be replaced with finalized
  values at the time of publication.  This note summarizes all of the
  substitutions that are needed.  No other RFC Editor instructions are specified
  elsewhere in this document.<a href="#section-1.3-2" class="pilcrow">¶</a></p>
<p id="section-1.3-3">Please apply the following replacements:<a href="#section-1.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-4.1">
            <p id="section-1.3-4.1.1">XXXX --&gt; the assigned RFC number for this draft<a href="#section-1.3-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.3-4.2">
            <p id="section-1.3-4.2.1">2024-06-04 --&gt; the actual date of the publication of this document<a href="#section-1.3-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The document uses the following definition in <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">
          <p id="section-2-3.1.1">configuration data<a href="#section-2-3.1.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-4">The document uses the following definition in <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>:<a href="#section-2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-5.1">
          <p id="section-2-5.1.1">data node<a href="#section-2-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.2">
          <p id="section-2-5.2.1">leaf<a href="#section-2-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.3">
          <p id="section-2-5.3.1">leaf-list<a href="#section-2-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.4">
          <p id="section-2-5.4.1">container<a href="#section-2-5.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.5">
          <p id="section-2-5.5.1">list<a href="#section-2-5.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.6">
          <p id="section-2-5.6.1">anydata<a href="#section-2-5.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.7">
          <p id="section-2-5.7.1">anyxml<a href="#section-2-5.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.8">
          <p id="section-2-5.8.1">interior node<a href="#section-2-5.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-5.9">
          <p id="section-2-5.9.1">data tree<a href="#section-2-5.9.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-6">The document uses the following definition in <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>:<a href="#section-2-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-7.1">
          <p id="section-2-7.1.1">access operation<a href="#section-2-7.1.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-8">This document defines the following term:<a href="#section-2-8" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-9">
        <dt id="section-2-9.1">immutable flag:</dt>
        <dd style="margin-left: 1.5em" id="section-2-9.2">
          <p id="section-2-9.2.1">A read-only state value the server provides to describe
   immutability of the data, which is conveyed via a YANG metadata annotation
   called "immutable" with a boolean value.<a href="#section-2-9.2.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="applicability">
<section id="section-3">
      <h2 id="name-applicability">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-applicability" class="section-name selfRef">Applicability</a>
      </h2>
<p id="section-3-1">While immutable flag applies to all configuration nodes, its value "true"
   can only be used for system configuration.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The immutable flag is also visible in read-only datastores like &lt;system&gt;
   (if implemented, see <span>[<a href="#I-D.ietf-netmod-system-config" class="cite xref">I-D.ietf-netmod-system-config</a>]</span>), &lt;intended&gt;
   and &lt;operational&gt; when a "with-immutable" parameter is carried (<a href="#with-immutable" class="auto internal xref">Section 4.2</a>),
   however this only serves as descriptive information about the
   instance node itself, but has no effect on the handling of the read-only
   datastore.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">Configuration data must have the same immutability in different
   writable datastores.  The immutability of data nodes is protocol and
   user independent.  The immutability and configured value of an
   existing node <span class="bcp14">MUST</span> only change via software upgrade, hardware
   resources change, or license change.<a href="#section-3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="immutable-metadata-annotation">
<section id="section-4">
      <h2 id="name-immutable-metadata-annotati">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-immutable-metadata-annotati" class="section-name selfRef">"Immutable" Metadata Annotation</a>
      </h2>
<div id="definition">
<section id="section-4.1">
        <h3 id="name-definition">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-definition" class="section-name selfRef">Definition</a>
        </h3>
<p id="section-4.1-1">The immutable flag which is defined as the metadata annotation takes a boolean
   value, and it is returned as requested by the client using a "with-immutable"
   parameter (<a href="#with-immutable" class="auto internal xref">Section 4.2</a>). If the "immutable" metadata annotation for
   configuration is not specified, the default "immutable" value is the
   same as the immutability of its parent node in the data tree (<a href="#interior" class="auto internal xref">Section 6</a>).
   The immutable metadata annotation value for a top-level instance
   node is "false" if not specified.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Note that "immutable" metadata annotations are used to annotate data node
   instances.  A list may have multiple instances in the data tree,
   servers may annotate some of the instances as immutable, while others as
   mutable.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Servers <span class="bcp14">MUST</span> ignore any immutable annotations sent from the client.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="with-immutable">
<section id="section-4.2">
        <h3 id="name-with-immutable-parameter">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-with-immutable-parameter" class="section-name selfRef">"with-immutable" Parameter</a>
        </h3>
<p id="section-4.2-1">This section specifies the NETCONF and RESTCONF protocol extensions to support
   "with-immutable" parameter. The "immutable" metadata annotations are not returned
   in a response unless explicitly requested by the client using this parameter.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div id="NETCONF-ext">
<section id="section-4.2.1">
          <h4 id="name-netconf-extensions-to-suppo">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-netconf-extensions-to-suppo" class="section-name selfRef">NETCONF Extensions to Support "with-immutable"</a>
          </h4>
<p id="section-4.2.1-1">This doument updates <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> to augment the &lt;get-config&gt; and &lt;get&gt;
   operations with an additional parameter named "with-immutable". The
   &lt;get-data&gt; operation defined in <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span> is also updated to support
   this parameter. If present, this parameter requests that the server includes
   the "immutable" metadata annotations in its response.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.2.1-2"><a href="#tree" class="auto internal xref">Figure 1</a> provides the tree structure <span>[<a href="#RFC8340" class="cite xref">RFC8340</a>]</span> of augmentations to NETCONF
   operations, as defined in the "ietf-immutable" module (<a href="#module" class="auto internal xref">Section 9</a>).<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<span id="name-augmentations-to-netconf-op"></span><div id="tree">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-4.2.1-3.1">
<pre>
module: ietf-immutable
  augment /ncds:get-data/ncds:input:
    +---w with-immutable?   empty {immutable}?
  augment /nc:get-config/nc:input:
    +---w with-immutable?   empty {immutable}?
  augment /nc:get/nc:input:
    +---w with-immutable?   empty {immutable}?
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-augmentations-to-netconf-op" class="selfRef">Augmentations to NETCONF Operations</a>
            </figcaption></figure>
</div>
<p id="section-4.2.1-4">Servers' support for accepting "with-immutable" parameter and returning "immutable"
   annotations is identified with the feature "immutable".<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="RESTCONF-ext">
<section id="section-4.2.2">
          <h4 id="name-restconf-extensions-to-supp">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-restconf-extensions-to-supp" class="section-name selfRef">RESTCONF Extensions to Support "with-immutable"</a>
          </h4>
<p id="section-4.2.2-1">This document extends Sections <a href="https://rfc-editor.org/rfc/rfc8040#section-4.8" class="relref">4.8</a> and <a href="https://rfc-editor.org/rfc/rfc8040#section-9.1.1" class="relref">9.1.1</a> of <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span> to add a query
   parameter named "with-immutable" to the GET operation. If present, this parameter
   requests that the server includes the "immutable" metadata annotations in its
   response. This parameter is only allowed with no values carried. If it has
   any unexpected value, then a "404 Bad Request" status-line is returned.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2.2-2">To enable a RESTCONF client to discover if the "with-immutable" query parameter
   is supported by the server, the following capability URI is defined:<a href="#section-4.2.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.2-3">
<pre>
    urn:ietf:params:restconf:capability:with-immutable:1.0
</pre><a href="#section-4.2.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="use-of-immutable-flag-for-different-statements">
<section id="section-5">
      <h2 id="name-use-of-immutable-flag-for-d">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-use-of-immutable-flag-for-d" class="section-name selfRef">Use of Immutable Flag for Different Statements</a>
      </h2>
<p id="section-5-1">This section defines what the immutable flag means to the client for
   each instance of YANG data node statement.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Throughout this section, the word "change" refers to create, update, and delete.<a href="#section-5-2" class="pilcrow">¶</a></p>
<div id="the-leaf-statement">
<section id="section-5.1">
        <h3 id="name-the-leaf-statement">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-the-leaf-statement" class="section-name selfRef">The "leaf" Statement</a>
        </h3>
<p id="section-5.1-1">When a leaf node instance is immutable, its value cannot change.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-leaf-list-statement">
<section id="section-5.2">
        <h3 id="name-the-leaf-list-statement">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-the-leaf-list-statement" class="section-name selfRef">The "leaf-list" Statement</a>
        </h3>
<p id="section-5.2-1">When a leaf-list node instance is immutable, its value cannot change.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">The immutable annotation attached to the individual leaf-list instance
   provides immutability with respect to the instance itself. If leaf-list
   inherits immutability from an ancestor (e.g., container), it is identical
   to each individual leaf-list entry being annotated without any bearing on the
   entry ordering and addition of new entries.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-container-statement">
<section id="section-5.3">
        <h3 id="name-the-container-statement">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-the-container-statement" class="section-name selfRef">The "container" Statement</a>
        </h3>
<p id="section-5.3-1">When a container node instance is immutable, it cannot change, unless
   the immutability of its descendant node is toggled.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">By default, as with all interior nodes, immutability is recursively
   applied to descendants (<a href="#interior" class="auto internal xref">Section 6</a>).<a href="#section-5.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-list-statement">
<section id="section-5.4">
        <h3 id="name-the-list-statement">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-the-list-statement" class="section-name selfRef">The "list" Statement</a>
        </h3>
<p id="section-5.4-1">When a list node instance is immutable, it cannot change, unless the
   immutability of its descendant node is toggled.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">By default, as with all interior nodes, immutability is recursively
   applied to descendants (<a href="#interior" class="auto internal xref">Section 6</a>).<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3">The immutable annotation attached to the individual list instance provides
   immutability with respect to the instance itself. If list inherits immutability
   from an ancestor (e.g., container), it is identical to each individual list
   entry being annotated without any bearing on the entry ordering and addition
   of new entries.<a href="#section-5.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-anydata-statement">
<section id="section-5.5">
        <h3 id="name-the-anydata-statement">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-the-anydata-statement" class="section-name selfRef">The "anydata" Statement</a>
        </h3>
<p id="section-5.5-1">When an anydata node instance is immutable, it cannot change. Additionally,
   as with all interior nodes, immutability is recursively applied to
   descendants (<a href="#interior" class="auto internal xref">Section 6</a>).<a href="#section-5.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-anyxml-statement">
<section id="section-5.6">
        <h3 id="name-the-anyxml-statement">
<a href="#section-5.6" class="section-number selfRef">5.6. </a><a href="#name-the-anyxml-statement" class="section-name selfRef">The "anyxml" Statement</a>
        </h3>
<p id="section-5.6-1">When an "anyxml" node instance is immutable, it cannot change. Additionally,
   as with all interior nodes, immutability is recursively applied to
   descendants (<a href="#interior" class="auto internal xref">Section 6</a>).<a href="#section-5.6-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="interior">
<section id="section-6">
      <h2 id="name-immutability-of-interior-no">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-immutability-of-interior-no" class="section-name selfRef">Immutability of Interior Nodes</a>
      </h2>
<p id="section-6-1">Immutability is a conceptual operational state value that is
   recursively applied to descendants, which may reset the immutability
   state as needed, thereby affecting their descendants.  There is no limit
   to the number of times the immutability state may change in a data tree.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">If the "immutable" metadata annotation for returned child node is omitted,
   it has the same immutability as its parent node. The immutability of top
   hierarchy of returned nodes is false by default. Servers may suppress the
   annotation if it is inherited from its parent node or uses the default value
   as the top-level node, but are not precluded from returning the annotation
   on every single element.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">For example, the following XML snippets shows applications configuration a
   server might return:<a href="#section-6-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-4">
<pre>
&lt;applications im:immutable="false"&gt;
&lt;application im:immutable="true"&gt;
  &lt;name&gt;ssh&lt;/name&gt;
  &lt;protocol&gt;tcp&lt;/protocol&gt;
  &lt;port-number im:immutable="false"&gt;22&lt;/port-number&gt;
&lt;/application&gt;
&lt;application im:immutable="false"&gt;
  &lt;name&gt;my-ssh&lt;/name&gt;
  &lt;protocol&gt;tcp&lt;/protocol&gt;
  &lt;port-number&gt;10022&lt;/port-number&gt;
&lt;/application&gt;
&lt;/applications&gt;
</pre><a href="#section-6-4" class="pilcrow">¶</a>
</div>
<p id="section-6-5">In the example, there are two "application" list entries inside "applications"
   container node. The "immutable" metadata attribute for applications container
   instance is "false", which is also its default value as the top-level element,
   and thus can be omitted. The "application" list entry named "ssh" is immutable
   with the immutability of its child node "port-number" being explicitly toggled.
   The other child nodes inside "ssh" application instance inherit immutability
   from their parent node thus are also immutable. The "immutable" metadata attribute
   for application list entry named "my-ssh" is "false", which is also the same
   value as its parent node, and thus can be omitted.<a href="#section-6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="system-configuration-datastore-interactions">
<section id="section-7">
      <h2 id="name-system-configuration-datast">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-system-configuration-datast" class="section-name selfRef">System Configuration Datastore Interactions</a>
      </h2>
<p id="section-7-1">Immutable configuration can only be created, updated and deleted by the server,
   and it is present in &lt;system&gt;, if implemented. That said, the existence of
   immutable configuration is independent of whether &lt;system&gt; is implemented or
   not. Not all system configuration data is immutable. Immutable configuration
   does not appear in &lt;running&gt; unless it is explicitly provided by the client
   or copied by the server via "resolve-system" parameter defined in
   <span>[<a href="#I-D.ietf-netmod-system-config" class="cite xref">I-D.ietf-netmod-system-config</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">A client may create/delete immutable nodes with same values as found
   in &lt;system&gt; (if implemented) in read-write configuration datastore (e.g.,
   &lt;candidate&gt;, &lt;running&gt;), which merely mean making immutable nodes
   visible/invisible in the datastore.<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="nacm-interactions">
<section id="section-8">
      <h2 id="name-nacm-interactions">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-nacm-interactions" class="section-name selfRef">NACM Interactions</a>
      </h2>
<p id="section-8-1">The server rejects an operation request due to immutability when it
   tries to perform the operation on the request data.  It happens after
   any access control processing, if the Network Configuration Access
   Control Model (NACM) <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span> is implemented on a server.  For
   example, if an operation requests to override an immutable
   configuration data, but the server checks the user is not authorized
   to perform the requested access operation on the request data, the
   request is rejected with an "access-denied" error.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="module">
<section id="section-9">
      <h2 id="name-yang-module">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-yang-module" class="section-name selfRef">YANG Module</a>
      </h2>
<p id="section-9-1">This module imports definitions from <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> and <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span>.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div class="breakable sourcecode" id="section-9-2">
<pre>&lt;CODE BEGINS&gt; file "ietf-immutable@2024-06-04.yang"

module ietf-immutable {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-immutable";
  prefix im;

  import ietf-yang-metadata {
    prefix md;
  }
  import ietf-netconf {
    prefix nc;
    reference
      "RFC 6241: Network Configuration Protocol (NETCONF)";
  }
  import ietf-netconf-nmda {
    prefix ncds;
    reference
      "RFC 8526: NETCONF Extensions to Support the Network
       Management Datastore Architecture";
  }
  organization
    "IETF Network Modeling (NETMOD) Working Group";

  contact
    "WG Web: &lt;https://datatracker.ietf.org/wg/netmod/&gt;
     WG List: &lt;mailto:netmod@ietf.org&gt;
     Author: Qiufang Ma
             &lt;mailto:maqiufang1@huawei.com&gt;
     Author: Qin Wu
             &lt;mailto:bill.wu@huawei.com&gt;
     Author: Balazs Lengyel
             &lt;mailto:balazs.lengyel@ericsson.com&gt;
     Author: Hongwei Li
             &lt;mailto:flycoolman@gmail.com&gt;";

  description
    "This module defines a metadata annotation called 'immutable'
     to allow the server to formally document existing behavior on
     the mutability of some system configuration. Clients may use
     'immutable' metadata annotation provided by the server to know
     beforehand why certain otherwise valid configuration requests
     will cause the server to return an error.

     Copyright (c) 2024 IETF Trust and the persons identified
     as authors of the code. All rights reserved.

     Redistribution and use in source and binary forms, with
     or without modification, is permitted pursuant to, and
     subject to the license terms contained in, the Revised
     BSD License set forth in Section 4.c of the IETF Trust's
     Legal Provisions Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC HHHH
     (https://www.rfc-editor.org/info/rfcHHHH); see the RFC
     itself for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL',
     'SHALL NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED',
     'NOT RECOMMENDED', 'MAY', and 'OPTIONAL' in this document
     are to be interpreted as described in BCP 14 (RFC 2119)
     (RFC 8174) when, and only when, they appear in all
     capitals, as shown here.";

  revision 2024-06-04 {
    description
      "Initial revision.";
    // RFC Ed.: replace XXXX and remove this comment
    reference
      "RFC XXXX: YANG Metadata Annotation for Immutable Flag";
  }

  md:annotation immutable {
    type boolean;
    description
      "The 'immutable' metadata annotation indicates the
       immutability of an instantiated data node. It takes as a
       value 'true' or 'false'. If the 'immutable' metadata
       annotation is not specified, the default value is the
       same as the value of its parent node in the data tree. The
       default value for a top-level instance node is false if not
       specified.";
  }

  feature immutable {
    description
      "Indicates that the server supports the 'immutable' metadata
       annotation.";
  }

  grouping with-immutable-grouping {
    description
      "Grouping for the with-immutable parameter that augments the
       RPC operations.";
    leaf with-immutable {
      type empty;
      description
        "If this parameter is present, the server returns the
         'immutable' annotation for configuration that it
         internally thinks immutable.";
    }
  }
  augment "/ncds:get-data/ncds:input" {
    if-feature "immutable";
    description
      "Allows the server to include 'immutable' metadata
       annotations in its response to get-data operation.";
    uses with-immutable-grouping;
  }
  augment "/nc:get-config/nc:input" {
    if-feature "immutable";
    description
      "Allows the server to include 'immutable' metadata
       annotations in its response to get-config operation.";
    uses with-immutable-grouping;
  }
  augment "/nc:get/nc:input" {
    if-feature "immutable";
    description
      "Allows the server to include 'immutable' metadata
       annotations in its response to get operation.";
    uses with-immutable-grouping;
  }
}

&lt;CODE ENDS&gt;</pre><a href="#section-9-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">This section uses the template described in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-netmod-rfc8407bis-12#section-3.7" class="relref">Section 3.7</a> of [<a href="#I-D.ietf-netmod-rfc8407bis" class="cite xref">I-D.ietf-netmod-rfc8407bis</a>]</span>.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">The "ietf-immutable" YANG module specified in this document defines a schema
   for data that is designed to be accessed via network management protocols such
   as NETCONF <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> or RESTCONF <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>. The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) <span>[<a href="#RFC6242" class="cite xref">RFC6242</a>]</span>. The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">The Network Configuration Access Control Model (NACM) <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>
   provides the means to restrict access for particular NETCONF or
   RESTCONF users to a preconfigured subset of all available NETCONF or
   RESTCONF protocol operations and content.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">The YANG module specified in this document defines a metadata annotation,
   it also extends the RPC operations of the NETCONF protocol in <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>
   and <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span>.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">The security considerations for the Defining and Using Metadata with
   YANG (see <span><a href="https://rfc-editor.org/rfc/rfc7952#section-9" class="relref">Section 9</a> of [<a href="#RFC7952" class="cite xref">RFC7952</a>]</span>) apply to the metadata annotation
   defined in this document.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">The security considerations for the NETCONF protocol operations (see
   <span><a href="https://rfc-editor.org/rfc/rfc6241#section-9" class="relref">Section 9</a> of [<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> and <span><a href="https://rfc-editor.org/rfc/rfc8526#section-6" class="relref">Section 6</a> of [<a href="#RFC8526" class="cite xref">RFC8526</a>]</span>) still apply to
   the operations extended in this document.<a href="#section-10-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="the-ietf-xml-registry">
<section id="section-11.1">
        <h3 id="name-the-ietf-xml-registry">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-the-ietf-xml-registry" class="section-name selfRef">The "IETF XML" Registry</a>
        </h3>
<p id="section-11.1-1">This document registers one XML namespace URN in the 'IETF XML registry',
   following the format defined in <span>[<a href="#RFC3688" class="cite xref">RFC3688</a>]</span>.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-11.1-2">
<pre>
        URI: urn:ietf:params:xml:ns:yang:ietf-immutable
        Registrant Contact: The IESG.
        XML: N/A, the requested URIs are XML namespaces.
</pre><a href="#section-11.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="the-yang-module-names-registry">
<section id="section-11.2">
        <h3 id="name-the-yang-module-names-regis">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-the-yang-module-names-regis" class="section-name selfRef">The "YANG Module Names" Registry</a>
        </h3>
<p id="section-11.2-1">This document registers one module name in the 'YANG Module Names'
registry, defined in <span>[<a href="#RFC6020" class="cite xref">RFC6020</a>]</span>.<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-11.2-2">
<pre>
        name: ietf-immutable
        prefix: im
        namespace: urn:ietf:params:xml:ns:yang:ietf-immutable
        RFC: XXXX
</pre><a href="#section-11.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="restconf-capability-urn-registry">
<section id="section-11.3">
        <h3 id="name-restconf-capability-urn-reg">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-restconf-capability-urn-reg" class="section-name selfRef">RESTCONF Capability URN Registry</a>
        </h3>
<p id="section-11.3-1">This document defines the following capability identifier URNs in the
"RESTCONF Capability URNs" registry defined in <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>:<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-11.3-2">
<pre>
Index           Capability Identifier
----------------------------------------------------------------------
:with-immutable urn:ietf:params:restconf:capability:with-immutable:1.0
</pre><a href="#section-11.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3688">[RFC3688]</dt>
        <dd>
<span class="refAuthor">Mealling, M.</span>, <span class="refTitle">"The IETF XML Registry"</span>, <span class="seriesInfo">BCP 81</span>, <span class="seriesInfo">RFC 3688</span>, <span class="seriesInfo">DOI 10.17487/RFC3688</span>, <time datetime="2004-01" class="refDate">January 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3688">https://www.rfc-editor.org/rfc/rfc3688</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6020">[RFC6020]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6020</span>, <span class="seriesInfo">DOI 10.17487/RFC6020</span>, <time datetime="2010-10" class="refDate">October 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6020">https://www.rfc-editor.org/rfc/rfc6020</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6241">[RFC6241]</dt>
        <dd>
<span class="refAuthor">Enns, R., Ed.</span>, <span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refAuthor">Schoenwaelder, J., Ed.</span>, and <span class="refAuthor">A. Bierman, Ed.</span>, <span class="refTitle">"Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6241</span>, <span class="seriesInfo">DOI 10.17487/RFC6241</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6241">https://www.rfc-editor.org/rfc/rfc6241</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6242">[RFC6242]</dt>
        <dd>
<span class="refAuthor">Wasserman, M.</span>, <span class="refTitle">"Using the NETCONF Protocol over Secure Shell (SSH)"</span>, <span class="seriesInfo">RFC 6242</span>, <span class="seriesInfo">DOI 10.17487/RFC6242</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6242">https://www.rfc-editor.org/rfc/rfc6242</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7950">[RFC7950]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"The YANG 1.1 Data Modeling Language"</span>, <span class="seriesInfo">RFC 7950</span>, <span class="seriesInfo">DOI 10.17487/RFC7950</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7950">https://www.rfc-editor.org/rfc/rfc7950</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7952">[RFC7952]</dt>
        <dd>
<span class="refAuthor">Lhotka, L.</span>, <span class="refTitle">"Defining and Using Metadata with YANG"</span>, <span class="seriesInfo">RFC 7952</span>, <span class="seriesInfo">DOI 10.17487/RFC7952</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7952">https://www.rfc-editor.org/rfc/rfc7952</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8040">[RFC8040]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"RESTCONF Protocol"</span>, <span class="seriesInfo">RFC 8040</span>, <span class="seriesInfo">DOI 10.17487/RFC8040</span>, <time datetime="2017-01" class="refDate">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8040">https://www.rfc-editor.org/rfc/rfc8040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8341">[RFC8341]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span> and <span class="refAuthor">M. Bjorklund</span>, <span class="refTitle">"Network Configuration Access Control Model"</span>, <span class="seriesInfo">STD 91</span>, <span class="seriesInfo">RFC 8341</span>, <span class="seriesInfo">DOI 10.17487/RFC8341</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8341">https://www.rfc-editor.org/rfc/rfc8341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8526">[RFC8526]</dt>
      <dd>
<span class="refAuthor">Bjorklund, M.</span>, <span class="refAuthor">Schoenwaelder, J.</span>, <span class="refAuthor">Shafer, P.</span>, <span class="refAuthor">Watsen, K.</span>, and <span class="refAuthor">R. Wilton</span>, <span class="refTitle">"NETCONF Extensions to Support the Network Management Datastore Architecture"</span>, <span class="seriesInfo">RFC 8526</span>, <span class="seriesInfo">DOI 10.17487/RFC8526</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8526">https://www.rfc-editor.org/rfc/rfc8526</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-netmod-rfc8407bis">[I-D.ietf-netmod-rfc8407bis]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Boucadair, M.</span>, and <span class="refAuthor">Q. Wu</span>, <span class="refTitle">"Guidelines for Authors and Reviewers of Documents Containing YANG Data Models"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netmod-rfc8407bis-12</span>, <time datetime="2024-06-21" class="refDate">21 June 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netmod-rfc8407bis-12">https://datatracker.ietf.org/doc/html/draft-ietf-netmod-rfc8407bis-12</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-netmod-system-config">[I-D.ietf-netmod-system-config]</dt>
        <dd>
<span class="refAuthor">Ma, Q.</span>, <span class="refAuthor">Wu, Q.</span>, and <span class="refAuthor">C. Feng</span>, <span class="refTitle">"System-defined Configuration"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netmod-system-config-08</span>, <time datetime="2024-06-18" class="refDate">18 June 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netmod-system-config-08">https://datatracker.ietf.org/doc/html/draft-ietf-netmod-system-config-08</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8340">[RFC8340]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span> and <span class="refAuthor">L. Berger, Ed.</span>, <span class="refTitle">"YANG Tree Diagrams"</span>, <span class="seriesInfo">BCP 215</span>, <span class="seriesInfo">RFC 8340</span>, <span class="seriesInfo">DOI 10.17487/RFC8340</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8340">https://www.rfc-editor.org/rfc/rfc8340</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8343">[RFC8343]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span>, <span class="refTitle">"A YANG Data Model for Interface Management"</span>, <span class="seriesInfo">RFC 8343</span>, <span class="seriesInfo">DOI 10.17487/RFC8343</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8343">https://www.rfc-editor.org/rfc/rfc8343</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8530">[RFC8530]</dt>
        <dd>
<span class="refAuthor">Berger, L.</span>, <span class="refAuthor">Hopps, C.</span>, <span class="refAuthor">Lindem, A.</span>, <span class="refAuthor">Bogdanovic, D.</span>, and <span class="refAuthor">X. Liu</span>, <span class="refTitle">"YANG Model for Logical Network Elements"</span>, <span class="seriesInfo">RFC 8530</span>, <span class="seriesInfo">DOI 10.17487/RFC8530</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8530">https://www.rfc-editor.org/rfc/rfc8530</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TR-531">[TR-531]</dt>
        <dd>
<span class="refAuthor">ONF</span>, <span class="refTitle">"UML to YANG Mapping Guidelines"</span>, <time datetime="2023-02" class="refDate">February 2023</time>, <span>&lt;<a href="https://wiki.opennetworking.org/download/attachments/376340494/Draft_TR-531_UML-YANG_Mapping_Gdls_v1.1.03.docx?version=5&amp;modificationDate=1675432243513&amp;api=v2">https://wiki.opennetworking.org/download/attachments/376340494/Draft_TR-531_UML-YANG_Mapping_Gdls_v1.1.03.docx?version=5&amp;modificationDate=1675432243513&amp;api=v2</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS28.623">[TS28.623]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"Telecommunication management; Generic Network Resource Model (NRM) Integration Reference Point (IRP); Solution Set (SS) definitions"</span>, <span>&lt;<a href="https://www.3gpp.org/ftp/Specs/archive/28_series/28.623/28623-i02.zip">https://www.3gpp.org/ftp/Specs/archive/28_series/28.623/28623-i02.zip</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS32.156">[TS32.156]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"Telecommunication management; Fixed Mobile Convergence (FMC) Model repertoire"</span>, <span>&lt;<a href="https://www.3gpp.org/ftp/Specs/archive/32_series/32.156/32156-h10.zip">https://www.3gpp.org/ftp/Specs/archive/32_series/32.156/32156-h10.zip</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="use-cases">
<section id="appendix-A">
      <h2 id="name-detailed-use-cases">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-detailed-use-cases" class="section-name selfRef">Detailed Use Cases</a>
      </h2>
<div id="uc1-modeling-of-server-capabilities">
<section id="appendix-A.1">
        <h3 id="name-uc1-modeling-of-server-capa">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-uc1-modeling-of-server-capa" class="section-name selfRef">UC1 - Modeling of server capabilities</a>
        </h3>
<p id="appendix-A.1-1">System capabilities might be represented as system-defined data nodes in
   the model.  Configurable data nodes might need constraints specified as
   "when", "must" or "path" statements to ensure that configuration is set
   according to the system's capabilities. For example,<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.1-2.1">
            <p id="appendix-A.1-2.1.1">A timer can support the values 1,5,8 seconds. This is defined in the
   leaf-list 'supported-timer-values'.<a href="#appendix-A.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.2">
            <p id="appendix-A.1-2.2.1">When the configurable 'interface-timer' leaf is set, it should be ensured
   that one of the supported values is used.  The natural solution would be to
   make the 'interface-timer' a leaf-ref pointing at the 'supported-timer-values'.<a href="#appendix-A.1-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="appendix-A.1-3">However, this is not possible as 'supported-timer-values' must be
   read-only thus config=false while 'interface-timer' must be writable
   thus config=true.  According to the rules of YANG it is not allowed
   to put a constraint between config true and false data nodes.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
<p id="appendix-A.1-4">The solution is that the supported-timer-values data node in the YANG
   Model shall be defined as "config true" and shall also be marked with
   the "immutable" annotation  making it unchangeable.  After this the
   'interface-timer' shall be defined as a leaf-ref pointing at the
   'supported-timer-values'.<a href="#appendix-A.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uc2-hw-based-auto-configuration-interface-example">
<section id="appendix-A.2">
        <h3 id="name-uc2-hw-based-auto-configura">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-uc2-hw-based-auto-configura" class="section-name selfRef">UC2 - HW based auto-configuration - Interface Example</a>
        </h3>
<p id="appendix-A.2-1"><span>[<a href="#RFC8343" class="cite xref">RFC8343</a>]</span> defines a YANG data model for the management of network
   interfaces.  When a system-controlled interface is physically present,
   the system creates an interface entry with valid name and type
   values in &lt;system&gt; (if exists, see <span>[<a href="#I-D.ietf-netmod-system-config" class="cite xref">I-D.ietf-netmod-system-config</a>]</span>).<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2-2">The system-generated type value is dependent on and represents the HW
   present, and as a consequence cannot be changed by the client.  If a
   client tries to set the type of an interface to a value that can
   never be used by the system, the request will be rejected by the
   server.  The data is modelled as "config true" and should be annotated
   as immutable.<a href="#appendix-A.2-2" class="pilcrow">¶</a></p>
<p id="appendix-A.2-3">Seemingly an alternative would be to model the list and these leaves
   as "config false", but that does not work because:<a href="#appendix-A.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-4.1">
            <p id="appendix-A.2-4.1.1">The list cannot be marked as "config false", because it needs to contain
  configurable child nodes, e.g., ip-address or enabled;<a href="#appendix-A.2-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-4.2">
            <p id="appendix-A.2-4.2.1">The key leaf (name) cannot be marked as "config false" as the list
  itself is config true;<a href="#appendix-A.2-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-4.3">
            <p id="appendix-A.2-4.3.1">The type cannot be marked "config false", because we <span class="bcp14">MAY</span> need to
  reference the type to make different configuration nodes
  conditionally available.<a href="#appendix-A.2-4.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="uc3-predefined-administrator-roles">
<section id="appendix-A.3">
        <h3 id="name-uc3-predefined-administrato">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-uc3-predefined-administrato" class="section-name selfRef">UC3 - Predefined Administrator Roles</a>
        </h3>
<p id="appendix-A.3-1">User and group management is fundamental for setting up access
   control rules (see <span><a href="https://rfc-editor.org/rfc/rfc8341#section-2.5" class="relref">Section 2.5</a> of [<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>).<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<p id="appendix-A.3-2">A device may provide a predefined user account (e.g., a system
   administrator that is always available and has full privileges) for
   initial system set up and management of other users/groups.  It is
   possible that clients can define a new user/group and grant it
   particular privileges, but the predefined administrator account and
   its granted access cannot be modified.<a href="#appendix-A.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uc4-declaring-immutable-system-configuration-from-an-lnes-perspective">
<section id="appendix-A.4">
        <h3 id="name-uc4-declaring-immutable-sys">
<a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-uc4-declaring-immutable-sys" class="section-name selfRef">UC4 - Declaring immutable system configuration from an LNE's perspective</a>
        </h3>
<p id="appendix-A.4-1">An LNE (logical network element) is an independently managed virtual
   network device made up of resources allocated to it from its host or
   parent network device <span>[<a href="#RFC8530" class="cite xref">RFC8530</a>]</span>.  The host device may allocate some
   resources to an LNE, which from an LNE's perspective is provided by
   the system and may not be modifiable.<a href="#appendix-A.4-1" class="pilcrow">¶</a></p>
<p id="appendix-A.4-2">For example, a host may allocate an interface to an LNE with a valid
   MTU value as its management interface, so that the allocated
   interface should then be accessible as the LNE-specific instance of
   the interface model.  The assigned MTU value is system-created and
   immutable from the context of the LNE.<a href="#appendix-A.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="implementations">
<section id="appendix-B">
      <h2 id="name-existing-implementations">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-existing-implementations" class="section-name selfRef">Existing Implementations</a>
      </h2>
<p id="appendix-B-1">There are already a number of full or partial implementations of
   immutability:<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-2.1">
          <p id="appendix-B-2.1.1">3GPP TS 32.156 <span>[<a href="#TS32.156" class="cite xref">TS32.156</a>]</span> and 28.623 <span>[<a href="#TS28.623" class="cite xref">TS28.623</a>]</span>: Requirements
   and a partial solution<a href="#appendix-B-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.2">
          <p id="appendix-B-2.2.1">ITU-T using ONF TR-531 <span>[<a href="#TR-531" class="cite xref">TR-531</a>]</span> concept on information model level but
   no YANG representation.<a href="#appendix-B-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.3">
          <p id="appendix-B-2.3.1">Ericsson: requirements and solution<a href="#appendix-B-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.4">
          <p id="appendix-B-2.4.1">YumaPro: requirements and solution<a href="#appendix-B-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.5">
          <p id="appendix-B-2.5.1">Nokia: partial requirements and solution<a href="#appendix-B-2.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.6">
          <p id="appendix-B-2.6.1">Huawei: partial requirements and solution<a href="#appendix-B-2.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.7">
          <p id="appendix-B-2.7.1">Cisco using the concept at least in some YANG modules<a href="#appendix-B-2.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.8">
          <p id="appendix-B-2.8.1">Junos OS provides a hidden and immutable configuration group
   called junos-defaults<a href="#appendix-B-2.8.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">Thanks to Kent Watsen, Jan Lindblad, Jason Sterne, Robert Wilton, Andy Bierman,
   Juergen Schoenwaelder, Reshad Rahman, Anthony Somerset, Lou Berger, Joe Clarke,
   and Scott Mansfield for reviewing, and providing important inputs to this document.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Qiufang Ma (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div dir="auto" class="left"><span class="street-address">101 Software Avenue, Yuhua District</span></div>
<div dir="auto" class="left"><span class="locality">Jiangsu</span></div>
<div dir="auto" class="left"><span class="postal-code">210012</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:maqiufang1@huawei.com" class="email">maqiufang1@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Qin Wu</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div dir="auto" class="left"><span class="street-address">101 Software Avenue, Yuhua District</span></div>
<div dir="auto" class="left"><span class="locality">Jiangsu</span></div>
<div dir="auto" class="left"><span class="postal-code">210012</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bill.wu@huawei.com" class="email">bill.wu@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Balazs Lengyel (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:balazs.lengyel@ericsson.com" class="email">balazs.lengyel@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hongwei Li</span></div>
<div dir="auto" class="left"><span class="org">HPE</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:flycoolman@gmail.com" class="email">flycoolman@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
